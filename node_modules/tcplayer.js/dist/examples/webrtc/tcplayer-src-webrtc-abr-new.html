<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no">
  <title>腾讯视频云快直播示例</title>
  <!-- 引入播放器 css 文件 -->
  <link href="https://web.sdk.qcloud.com/player/tcplayer/release/v4.8.0/tcplayer.min.css" rel="stylesheet"/>
  <script src="https://cdn.bootcdn.net/ajax/libs/vConsole/3.9.1/vconsole.min.js"></script>
  <!-- 引入播放器 js 文件 -->
  <script src="https://web.sdk.qcloud.com/player/tcplayer/release/v4.8.0/tcplayer.v4.8.0.min.js"></script>
  <!-- 示例 CSS 样式可自行删除 -->
  <style>
    html,body{
      margin: 0;
      padding: 0;
    }
    .tcplayer {
      margin: 0 auto;
    }
    @media screen and (max-width: 640px) {
      .tcplayer,
      #player-container-id {
        width: 100%;
        height: 270px;
      }
    }
    /* 设置logo在高分屏的显示样式 */
    @media only screen and (min-device-pixel-ratio: 2), only screen and (-webkit-min-device-pixel-ratio: 2) {
      .tcp-logo-img {
        width: 50%;
      }
    }
    .button-container{
      text-align: center;
    }
  </style>
</head>
<body>


<div id="rate"></div>
<!-- 设置播放器容器 -->
<video id="player-container-id" preload="auto" width="640" height="360" playsinline webkit-playsinline>
</video>

<script>
  if (TCPlayer.browser.IS_ANDROID || TCPlayer.browser.IS_IOS) {
    const vConsole = new VConsole({ maxLogNumber: 1000 });
  }


  var player = TCPlayer('player-container-id',{
    // 封面图
    autoplay: true,
    language: 'en',    
    // sources: 'webrtc://global-lebtest-play.myqcloud.com/live/lebtest?txSecret=f22a813b284137ed10d3259a7b5c224b&txTime=69f1eb8c&tabr_bitrates=d1080p,d540p,d360p&tabr_start_bitrate=d540p&tabr_control=auto',
    // sources: [
    //   {
    //     src: 'webrtc://global-lebtest-play.myqcloud.com/live/lebtest?txSecret=f22a813b284137ed10d3259a7b5c224b&txTime=69f1eb8c&tabr_bitrates=d1080p,d540p,d360p&tabr_start_bitrate=d1080p'
    //   }
    // ],

    licenseUrl: 'https://license.vod2.myqcloud.com/license/v2/1306264703_1/v_cube.license',

    webrtcConfig: {
      // receiveSEI: true,
      connectRetryCount: 0,
      // fallbackUrl: 'https://global-lebtest-play.myqcloud.com/live/lebtest_HLSABR.m3u8',
      enableAbr: false,
      // 模板名对应的label名
      abrLabels: {
        // d1080p: 'FHD1',
        // d540p: 'HD2',
        // d360p: 'SD3',
        // auto: 'AUTO4',
      },
      // 参考 快直播 config 说明
    },
  });


  player.on('webrtcfallback', function(event) {
    
  });

  player.on('webrtcevent', function(event) {
    console.log('webrtcEvent', event);
  });

  player.on('webrtcsei', function(event) {
    console.log('event', event);
  });
  player.on('webrtcfallback', function(event) {
    console.log('webrtcfallback', event);
  });

  player.on('debug', function(event, data) {
    console.log('debug', event, data);
  });
  player.on('webrtcstats', function(data) {

    try {
      document.getElementById('rate').innerHTML = data.data.video.frameWidth + 'x' + data.data.video.frameHeight;
    } catch (e) {
      console.log('e', e.message);
    }
    
  });

  // player.on('webrtcevent', function(event) {
  //   console.log('webrtcEvent', event);
  // });

  player.on('webrtcsei', function(event) {
    console.log('event', event);
  });
  player.on('webrtcfallback', function(event) {
    console.log('webrtcfallback', event);
  });

  player.on('debug', function(event, data) {
    console.log('debug', event, data);
  });
  player.on('webrtcstats', function(data) {

    try {
      document.getElementById('rate').innerHTML = data.data.video.frameWidth + 'x' + data.data.video.frameHeight;
    } catch (e) {
      console.log('e', e.message);
    }
    
  });

  // player.on('webrtcevent', function(event) {
  //   console.log('webrtcEvent', event);
  // });
  // player.on('webrtcfallback', function(event) {
  //   console.log('webrtcfallback', event);
  // });

  // player.on('webrtceventtest', function(event) {
  //   console.log('webrtceventtest', event);
  // })

  // player.on('debug', function(event, data) {
  //   console.log('debug', event, data);
  // });
  // player.on('webrtcstats', function(data) {

  //   try {
  //     document.getElementById('rate').innerHTML = data.data.video.frameWidth + 'x' + data.data.video.frameHeight;
  //   } catch (e) {
  //     console.log('e', e.message);
  //   }
    
  //   // console.log('data', event, data);
  // });

</script>
</body>
</html>
